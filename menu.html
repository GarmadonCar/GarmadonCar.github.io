<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>BIG BOY TODO APP!!! with Images</title>
    <link rel="stylesheet" href="bigboy.css">
    <style>
        body {
            background-image: url("images/menu-normal.png");
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-size: auto 100%;
            background-position: center 50%;
        }
        .hover-fade {
            opacity: 0.1;
            transition: opacity 0.3s ease;
        }
        .hover-fade:hover {
            opacity: 1;
        }
        .task-id, .task-desc {
            margin: 2px;
        }
        #container-left, #container-right {
            max-width: 20vw;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }
        #container-left p, #container-right p {
            white-space: normal;
        }
        .task-img {
            width: 5vw;
            height: 5vw;
            object-fit: fill;
            margin: 1vw;
        }
    </style>
</head>
<body>
    <script type="text/javascript" src="util.js"></script>
    <script type="text/javascript" src="yapper.js"></script>
    <script type="module">
        ambiance();
        await fadeFromBlack(2000);
    </script>

    <!-- Task Containers -->
    <div id="container-left" style="position:absolute; top:20%; left:20%; border:1px solid black; display:flex; flex-direction:column;">
        <div id="container-left-top" style="display:flex;">
            <div style="flex:6">
                <h2 class="task-id">000</h2>
                <p class="task-desc">This item is not currently available.</p>
            </div>
            <div style="flex:1">
                <img class="task-img" src="images/placeholder.jpg" alt="Task Image"/>
            </div>
        </div>
        <div id="container-left-mid" style="display:flex;">
            <div style="flex:6">
                <h2 class="task-id">000</h2>
                <p class="task-desc">This item is not currently available.</p>
            </div>
            <div style="flex:1">
                <img class="task-img" src="images/placeholder.jpg" alt="Task Image"/>
            </div>
        </div>
        <div id="container-left-bot" style="display:flex;">
            <div style="flex:6">
                <h2 class="task-id">000</h2>
                <p class="task-desc">This item is not currently available.</p>
            </div>
            <div style="flex:1">
                <img class="task-img" src="images/placeholder.jpg" alt="Task Image"/>
            </div>
        </div>
    </div>
    <div id="container-right" style="position:absolute; top:20%; left:60%; border:1px solid black; display:flex; flex-direction:column;">
        <div id="container-right-top" style="display:flex;">
            <div style="flex:6">
                <h2 class="task-id">000</h2>
                <p class="task-desc">This item is not currently available.</p>
            </div>
            <div style="flex:1">
                <img class="task-img" src="images/placeholder.jpg" alt="Task Image"/>
            </div>
        </div>
        <div id="container-right-mid" style="display:flex;">
            <div style="flex:6">
                <h2 class="task-id">000</h2>
                <p class="task-desc">This item is not currently available.</p>
            </div>
            <div style="flex:1">
                <img class="task-img" src="images/placeholder.jpg" alt="Task Image"/>
            </div>
        </div>
        <div id="container-right-bot" style="display:flex;">
            <div style="flex:6">
                <h2 class="task-id">000</h2>
                <p class="task-desc">This item is not currently available.</p>
            </div>
            <div style="flex:1">
                <img class="task-img" src="images/placeholder.jpg" alt="Task Image"/>
            </div>
        </div>
    </div>

    <!-- Navigation Buttons -->
    <button onclick="onClick(false)" onmouseover="changeBackground('images/menu-left.png')" onmouseout="resetBackground()" style="position:absolute; left:15%; top:85%; width:8%; height:8%; opacity:0%;"></button>
    <button onclick="onClick(true)" onmouseover="changeBackground('images/menu-right.png')" onmouseout="resetBackground()" style="position:absolute; left:75%; top:83%; width:8%; height:8%; opacity:0%;"></button>
    <a href="table.html">
        <div style="position:absolute; top:10%; left:47%; width:4%; height:5%; background:white; border:0.5px solid gray; border-radius:0.5%; text-align:center; line-height:1.5em;">
            Put it Down
        </div>
    </a>

    <!-- Page Display -->
    <div id="page-display" style="position:absolute; bottom:5%; left:49%; transform:translateX(-50%); font-size:1.2em; color:white;">
        <span id="current-page">Page 1</span> of <span id="total-pages">1</span>
    </div>

    <script src="todo.js"></script>
    <script>
        function changeBackground(imagePath) {
            document.body.style.backgroundImage = `url("${imagePath}")`;
        }
        function resetBackground() {
            document.body.style.backgroundImage = 'url("images/menu-normal.png")';
        }

        const taskList = getTasks();
        let page = 1;
        const perPage = 6;
        const maxPage = Math.ceil(taskList.length / perPage);
        const containerIds = [
            "container-left-top","container-left-mid","container-left-bot",
            "container-right-top","container-right-mid","container-right-bot"
        ];

        // go go linux gadget
        let genericImages = ["images/generic-images/07EC9FCB-1CB9-4010-89E2-3628D8A752B6.webp","images/generic-images/1743823818351-632.webp","images/generic-images/agoodnightout.png","images/generic-images/Bearorito_Applepitolirotito.webp","images/generic-images/BEGALINO_KOTOBANANINO.webp","images/generic-images/bigmans.png","images/generic-images/bikeindasnow.png","images/generic-images/blasphemy.png","images/generic-images/Bombardiere.webp","images/generic-images/Bombardiro_Crocodilo.webp","images/generic-images/Bomborito_bandito.webp","images/generic-images/Boneca_Ambalabu_.webp","images/generic-images/Brr_Brr_Patapim.webp","images/generic-images/Burbaloni.webp","images/generic-images/cardoittoem.png","images/generic-images/cargar.png","images/generic-images/Chefcrabracadabra.webp","images/generic-images/chickenjokey.png","images/generic-images/chillguy.png","images/generic-images/ChimpanziniBananini.webp","images/generic-images/cigarrr.png","images/generic-images/Coccodrilli_Faerini.webp","images/generic-images/D28146d6115611f0a74582963e3c41a8_1.webp","images/generic-images/deadbird.png","images/generic-images/donut.png","images/generic-images/Frigo_Camelo.webp","images/generic-images/Frulli_Frulla_HD.webp","images/generic-images/Gambero_Spero.webp","images/generic-images/gaming.png","images/generic-images/garcar.png","images/generic-images/gargar.png","images/generic-images/gateway.png","images/generic-images/gi hun.png","images/generic-images/Giraffa_Celeste2.webp","images/generic-images/goulashsoup.png","images/generic-images/hardtimescreatestrongmen.png","images/generic-images/hermetsnow.png","images/generic-images/hotbabe.png","images/generic-images/joever.png","images/generic-images/kaiindabattle.png","images/generic-images/kaiondaswing.png","images/generic-images/kaiunderdaslide.png","images/generic-images/linux.png","images/generic-images/lionsatatopitsrock.png","images/generic-images/Lirili_rili_ralila.webp","images/generic-images/moneybob.png","images/generic-images/munashinha.png","images/generic-images/munasinfinger.png","images/generic-images/orionbeer.png","images/generic-images/Pararell_Bararell.webp","images/generic-images/phillipo.png","images/generic-images/Piccione_Macchina.webp","images/generic-images/pinkmonsterbin.png","images/generic-images/pulsefromrainbowsixsiege.png","images/generic-images/Quesadilla_Crocodilla.webp","images/generic-images/ratthrone.png","images/generic-images/resonableportions.png","images/generic-images/robertoppenhiemr.png","images/generic-images/rockbreakfast.png","images/generic-images/roytpose.png","images/generic-images/Rugginato_LupoGT.webp","images/generic-images/Saturno_Saturnita.webp","images/generic-images/sheldo.png","images/generic-images/socialengineering.png","images/generic-images/Tarantula_Hawk_Tuah.webp","images/generic-images/Tractor.webp","images/generic-images/Tralalero_tralala.webp","images/generic-images/Tric_Trac_Baraboom.webp","images/generic-images/Trippi_Troppi2.webp","images/generic-images/true.png","images/generic-images/walkinhere.png","images/generic-images/___________________.webp","images/generic-images/whatscookin.png","images/generic-images/wheel.png"];


        function hashStringToInt(str) {
            let hash = 0;
            for (let i = 0; i < str.length; i++) {
                hash = (hash << 5) - hash + str.charCodeAt(i);
                hash |= 0;
            }
            return Math.abs(hash);
        }

        function getCurrentPageElements() {
            const start = (page - 1) * perPage;
            return taskList.slice(start, start + perPage);
        }

        function renderTasks() {
            const tasks = getCurrentPageElements();
            containerIds.forEach((cid, idx) => {
                const container = document.getElementById(cid);
                const idEl = container.querySelector('h2.task-id');
                const descEl = container.querySelector('p.task-desc');
                const imgEl = container.querySelector('img.task-img');

                if (tasks[idx]) {
                    const [taskId, taskDesc] = tasks[idx];
                    idEl.textContent = taskId;
                    descEl.textContent = taskDesc;
                    if (genericImages.length) {
                        const imgIndex = hashStringToInt(taskId) % genericImages.length;
                        imgEl.src = genericImages[imgIndex];
                    }
                } else {
                    idEl.textContent = '---';
                    descEl.textContent = 'No item available.';
                    imgEl.src = 'images/placeholder.jpg';
                }
            });
            document.getElementById('current-page').textContent = page;
            document.getElementById('total-pages').textContent = maxPage;
        }

        const pageturn = new Audio('sounds/pageturn.mp3');
        function onClick(forward) {
            pageturn.currentTime = 0;
            pageturn.play();
            page = forward ? (page % maxPage) + 1 : (page - 2 + maxPage) % maxPage + 1;
            renderTasks();
        }

        // Initialize: load images then render
        (async () => {
            renderTasks();
        })();
    </script>
</body>
</html>
